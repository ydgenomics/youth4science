# 第五章 模块与函数
- 一、概括
- 二、函数
- 三、模块
- 四、包
- 五、第三方模块的安装
- 六、综合举例

## 一、概述
1. 为什么需要函数
2. python的程序组成
  - python的程序由包、模块、类和函数组成
  - 函数(function)：函数是一段可重用的有名称的代码函数，用于执行特定的任务，可以接收参数并返回值。函数可以定义在模块中，也可以定义在类中。使用函数可以减少代码的重复性，增加函数的模块化。
  - 类（class）：类用来创建对象的蓝图，它包含一组属性（变量）和方法（函数）。类可以定义在模块钟，也可以定于在包中的不同模块里。
  - 模块（module）：模块是处理某一类问题的集合，通常以.py为扩展名，模块可以包含函数、类、变量和可执行代码。模块通常没有所谓的main函数，即可执行语句。
  - 包（package）：包是一个完成特定任务的工具箱，是一个包含多个模块的目录。包目录中比哦徐包含一个__init__.py文件（可以是空文件，也可以包含初始化代码）。使用自带的工具包，可以提高程序开发效率、减少编程复杂度，达到代码宠用的效果
3. python的程序结构
   - python自带的工具包和模块安装在其安装目录的Lib子目录中
   - 注意：包必须至少含有一个__init__.py文件。内容可以为空，它用于标识当前文件夹是一个包


## 二、函数
1. 函数的定义及调用 `def`
   - 函数必须先定义，后使用
   - 函数名与变量名的命名规则相同
2. 函数的参数
  - 位置参数：形参按位置依次引用实参值
  - 默认值参数：默认值的参数不能位于没有默认值的参数前面，是关键字参数的特列
  - 关键字参数：以`pram=value`的方式传递参数
  - 不定长参数
    - 即在调用函数时可以接收任意数量的实参，这些实参在传递给函数时会被封装成元组（位置参数）或字典（关键字参数）形式
    - 在函数的参数名前面加一个"*"，表示参数是以形参名为标识符的元组
    - 在函数的参数名前面加两个"**"，表示参数是以形参名为标识符的字典，其中关键字为“键”，参数值为“值”
  - 拆分参数列表：当在实参前面加上*或**，就意味着拆分参数。*表示将列表、元组拆成一个个单独的位置实参；**表示将字典拆分成关键字参数

```python
def SumVal(*args):
  total=0
  for i in args:
    total += i
  return total

ls = [3,5,2,7,1]
print(SumVal(*ls))

def StudentInfo(name, chineselevel, country):
  print("name : %s, chinese level : %s, country : %s" % (name, chineselevel, country))

d = {'country': 'china', 'chineselevel': 'excellent', 'name': 'liming'}
StudentInfo(**d)
```
  -  **NOTE: 参数传递顺序**
    - 定义函数时，可以混合使用多种参数传递方式
    - 关键字参数-元组参数-字典参数-默认值参数
    - 调用函数时，首先按位置顺序传递参数，其次按关键字传递参数。多余的非关键字参数传递给元组，多余的关键字参数传递给字典

3. 函数的调用
   - 调用程序在调用处暂替执行
   - 函数的形参在调用时被赋值为实参
   - 执行函数体
   - 函数被调用结束，给出返回值

4. 函数的返回值
   - `return`语句：程序退出该函数，并返回到函数被调用的地方（一般来说，若函数有返回值，则返回至函数调用时的那条语句参与运算，否则返回至函数调用语句的下一条继续向后执行）
   - 支持三种情况（没有返回值，返回一个，返回多个值）

5. 函数的嵌套
  - 函数的嵌套调用和函数内部再定义函数
  - 尽量不在函数内部定义函数，这种方式不便于程序维护

6. 变量的作用域
  - 标量的作用域是指变量的作用范围，即定义一个变量后，在那些地方可以使用这个变量
  - 全局变量--定义在函数外，作用域是整个程序。若要在函数内部修改全局变量的值，必须要用`global`语句声明
  - 局部变量--定义在函数内，作用域是函数内部。形参也是局部变量

7. 递归函数：可以在函数主体内直接或间接地调用自己，即函数的嵌套是函数本身
8. lambda函数
  - 用于创建一个匿名函数，函数名未和标识号进行绑定
  - 是一种不使用`def`定义函数的形式，能快速定义一个简短的函数
  - `lambda 参数1，参数2，...，参数n: 表达式`
9. 生成器函数`yield`
  - generator函数的定义与普通函数的区别只是在函数体内使用`yield`生成数据项
  - generator函数的输出可以被for循环遍历，且可以通过`__next__()`方法获得`yield`生成的数据项
  - 与return有一定的区别
10. 高阶函数
11. 猴子补丁：在程序执行时动态替换已有的代码。主要用于在不修改已有代码情况下修改其功能或增加新功能

## 三、模块
什么是模块？1，处理一类问题的集合，包含多个函数、类、变量；2.将这些函数存储于一个.py文件中；3.使用import命令导入

1. 模块的创建及导入
   - 创建模块，即创建一个.py文件，在其中包含用于完成任务的变量、类和函数，不包括所谓的main函数，即调用该模块中函数的语句
   - 模块使用之前要导入该模块

```python
import shapes

print(dir(shapes)) # 输出模块shapes的属性；查看存在的函数、变量
print(shapes.CHAR) # 查看注释
shapes.square(5) # 调用square函数

```
2. 模块的属性
  - `__doc__` 模块中用于描述的文档字符串
  - `__name__` 模块名。如果当前模块是单独执行的，则其__name__的值就是__main__；否则，如果是作为模块导入，则其__name__的值就是模块的名字
  - `__builtins__` 定义了一些常用函数，可以实现数据类型的转化、数据的计算、序列的处理，可通过`dir(__builtins__)`查看所包含内容
    - `filter()`
    - `reduce()`
    - `map()`
  - `__file__` 模块保存的路径

## 四、包
- python中的包的作用于操作系统中文件夹的作用相似，利用包可以将多个关系密切的模块组织在一起，方便进行程序的重用，也可以有效避免模块命名冲突问题
- 一个包，就是创建一个文件夹并在该文件定义夹下创建一个__init__.py文件（内容可以为空），文件夹的名字就是包名。当宝被调用时（使用import也可导入包），则自动执行__init__.py文件。
- 另外，可以根据需要在该文件夹下再创建子文件夹，子文件夹中创建一个__init__.py文件，则又形成了一个子包。
- 模块可以放在任何一个包或子包中，在导入模块时需要指定所在的包和子包的名字。例如，导入包A中的模块B，则需要使用"import A.B"

## 五、 第三方库（模块）的安装
## 六、综合举例

[7 分钟搞懂 Python 对象和类！零基础也能秒会🔥](https://www.bilibili.com/video/BV1WQtmzcEn9/?spm_id_from=333.337.search-card.all.click&vd_source=5600c17ea3ce6334fe6d9c0d3cd99627)

